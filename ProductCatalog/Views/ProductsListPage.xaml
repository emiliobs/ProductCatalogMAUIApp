<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewModels="clr-namespace:ProductCatalog.ViewModels"
             xmlns:models="clr-namespace:ProductCatalog.Models"
             x:Class="ProductCatalog.Views.ProductsListPage"
             x:DataType="viewModels:ProductsListViewModel"
             Title="My Products"
             BackgroundColor="#f5f7fa">

    <Grid RowDefinitions="Auto,*,Auto">

        <!-- Header -->
        <Border Grid.Row="0"
                BackgroundColor="#6C5CE7"
                Padding="20,40,20,20">
            <Label Text="ðŸ“¦ Products"
                   FontSize="32"
                   FontAttributes="Bold"
                   TextColor="White" />
        </Border>

        <!-- Products list -->
        <CollectionView Grid.Row="1"
                        ItemsSource="{Binding Products}"
                        Margin="15">

            <CollectionView.EmptyView>
                <StackLayout Padding="50" VerticalOptions="Center">
                    <Label Text="ðŸ“¦"
                           FontSize="80"
                           HorizontalTextAlignment="Center" />
                    <Label Text="No products"
                           FontSize="24"
                           FontAttributes="Bold"
                           HorizontalTextAlignment="Center"
                           TextColor="#2D3436" />
                    <Label Text="Tap the button below to add sample products"
                           FontSize="16"
                           HorizontalTextAlignment="Center"
                           TextColor="#636E72"
                           Margin="0,10,0,0" />
                </StackLayout>
            </CollectionView.EmptyView>

            <CollectionView.ItemTemplate>
                <DataTemplate x:DataType="models:Product">
                    <Border BackgroundColor="White"
                            Margin="0,0,0,12"
                            Padding="16"
                            StrokeThickness="0">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="12" />
                        </Border.StrokeShape>

                        <VerticalStackLayout Spacing="8">
                            <Label Text="{Binding Name}"
                                   FontSize="18"
                                   FontAttributes="Bold"
                                   TextColor="#2D3436" />

                            <Label FontSize="20"
                                   FontAttributes="Bold"
                                   TextColor="#27AE60">
                                <Label.Text>
                                    <Binding Path="Price" StringFormat="${0:N2}" />
                                </Label.Text>
                            </Label>

                            <HorizontalStackLayout Spacing="8">
                                <Label Text="ðŸ“¦" FontSize="14"  />
                                <Label Text="{Binding Stock}"
                                       FontSize="14"
                                       TextColor="Red"
                                       FontAttributes="Bold" />
                                <Label Text="-" FontSize="14"  TextColor="Black"/>
                                <Label Text="{Binding Category}"
                                       FontSize="14"
                                       TextColor="#3498DB" />
                            </HorizontalStackLayout>
                        </VerticalStackLayout>
                    </Border>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

        <!-- Sample products button -->
        <Button Grid.Row="2"
                Text="âž• Add Sample Products"
                FontSize="16"
                BackgroundColor="#27AE60"
                TextColor="White"
                Margin="20"
                Padding="16"
                CornerRadius="12"
                Command="{Binding AddSampleProductsCommand}" />

        <!-- Loading overlay -->
        <Grid Grid.Row="0" Grid.RowSpan="3"
              IsVisible="{Binding IsLoading}"
              BackgroundColor="#80000000">
            <ActivityIndicator IsRunning="True"
                               Color="#6C5CE7"
                               WidthRequest="50"
                               HeightRequest="50" />
        </Grid>
    </Grid>
</ContentPage>